프로그럄은 매우 단순한 일을한다 : 명령어 실행

1.반입 2.해석 3.실행
끝

운영체란 프로그램을 쉽게 실행하고(여러개도 가능), 프로그램 간의 메모리 공유를 가능케 하고,
시스템을 사용하기 편리하면서 정확하고올바르게 동작시킬 책임이 있게떄문에 OS라고 부름

cpu,메모리,및 디스크는 시스템의 자원이다. 이 자원들 관리하는것들이 운영체제의 역활

# 가상화

하나의 cpu 또는 소규모 cpu 집할을 무한개의 cpu가 존재하는 것처럼 변환하여 동시에 많은 수의 프로그램을 실행
시키는것을 cpu 가상화라고 한다.
각 프로세스는 자신만의 가상주소 공간을 갖는다. 운영체제는 이 가상 주소 공간을 컴퓨터의 물리 메모리로 매핑된다

# 병행성

프로그램이 한번에 많을 일을 하려할때 동시에 발생하는 그리고 반드시 해결해야 하는 문제들을 가리킬때 ....

--멀티 쓰레드--

메인 프로그램 Pthread_create()를 사용하여 두개의 쓰레드를 생성한다
쓰레드를 동일한 메모리 공간에서 함께 실행 중인 여러 개의 함수라고 생각할 수 있다.
각 쓰레드는 worker() 라는 루틴을 실행한다.
worker()루틴은 loops 번 만큼 루프를 반복하면서 카운터 값을 증가시킨다.
loops를 1000으로 설정하여 프로그램을 실행시켰을때 어떤일이 일어날까..
loops 값은 각 쓰레드가 카운터를 증가시키는 획수다.
loops값을 1000으로 지정한 후 프로그램을 실행시키면,
counter 변수의 최종 값은 얼마나 될까?
각 쓰레드가 1000번 씩 counter 값을 증가시켰기 떄문에 counter의 최종 값은 2000이된다.
loops 값이 N 이면 최종 출력은 2N이 되리라고 예상할수있다.
하지만 그렇지않다 그 이유는
명령어는 한번에 하나씩만 실행된다
세개의 명령어가 원자적으로 한번에실행되지않기 떄문에 이상한 일이 발생할수 있다.

# 영속성

---

## 프로세스

프로세스는 실행 중인 프로그램으로 정의
이 명령어와 데이터 묶음을 읽고 실행하여 프로그램에 생명을 불어넣는 것이 운영체제이다.

#### cpu가 여러 개 존재한다는 환상을 어떻게 제공하는가

적은 개수의 cpu 밖에 없더라도, 운영체제는 어떻게 거의 무한개에 가까운 cpu가 있는 듯한 환상을 만들 수 있을까 ?

cpu 가상화의 효율적인 구현을 위해서는 ,"도구"와 "지능"이 필요하다.도구를 메커니즘이라고한다. 메커니즘은 필요한 기능을 구현하는
방법이다. CPU에서는 실행을 잠시 중단하고 다른 프로그램을 실행하는 것을 문맥 교환이라고 한다. 이 시분할
기법은 모든 현대 운영체제들이 채택하고 있다.

---

프로세스 관련 주요 용어

- 프로세스는 실행중인 프로그램을 나타내는 개념이다. 프로세스는 프로세스의 상태, 프로세스 주소공간에 있는 메모리 변수 값들,
  레지스트리 값들(스택 포인터,프로그램카운터 등),그리고 입출력 관련정보(사용중인 파일들)들로 표현된다.

- 프로세스 API 는 프로세스와 관련된 함수들을 일컫는다,
  프로세스의 생성, 삭제등에 관련된 함수들이다

- 프로세스에는 다양한 프로세스 상태가 있다. 실행, 동기 ,블럭등이 그것이다.
  특정사건 발생(CPU 의 할당, CPU의 반납,입출력 요청,,입출력 완료등)으로 인해 프로세스의 상태가 변화한다.
- 프로세스 리스트는 시스템에 존재하는 모든 프로세스에 대한 정보를 갖는다.

#### 프로그램이 어떻게 프로세스로 변형되는가

프로그램 실행을 위하여 운영체제가 하는 첫 번째 작업은 프로그램 코드와 정적 데이터를 메모리, 프로세스의 주소 간에 탑재 하는 것이다.
어떤 프로그램이던 실행시키기 전에 운영체제는 프로그램의 중요 부분을 디스크에서 메모리로 탑재 해야된다는것만 기억하자.
C프로그램에서 힙은 동적으로 할당된 데이터를 저장하기위해 사용된다.
프로그램은 malloc()을 호출하여 필요한 공간을 요청하고 free()를 호출하여 사용했던 공간을 반환하여 다른 프로그램이 사용할 수 있도록 한다.

## 요약

프로세스는 간단히 말하면 실행 중인 프로그램이다. 이 개념을 염두에 두고 이제 좀 구체적인 핵심 사항을 살펴볼 것이다.
여기서 핵심 사항은 프로세스 구현에 필요한 기법, 구현한 프로세스를 스케줄링하는 정책등을 뜻한다 .이러한 여러 방법들을 조합하여 운영체제가
CPU를 가상화 하는 방식을 알아보자

### CPU 스케쥴링

CPU 스케쥴링이란 멀티프로그램드 된 시스템에서 필수가 된다.
멀티프로그래밍 즉 앞으로 cpu가 한개고 여러개의 멀티 프로세서가 있다면
concurrent

cpu의 속도가 빨라서 놀고있다면 시분할을 해서 cpu 자원을 끼워넣어서 사용한다.
CPU의 uyiliztion을 위해서 cpu 스케쥴링이 필요하다.

메모리에 로드되어 있는 프로세스들 중에 어떤 프로세스한테 CPU를 할당해주는것이
CPU 스케쥴러 이다.
